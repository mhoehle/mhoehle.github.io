<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>How to Win a Game (or More) of Super Six</title>
  <meta name="description" content="Abstract:">

  <link rel="stylesheet" href="/hoehle/blog/css/main.css">
  <link rel="canonical" href="http://staff.math.su.se/hoehle/blog/2023/03/13/super6.html">
  <link rel="alternate" type="application/rss+xml" title="Theory meets practice..." href="http://staff.math.su.se/hoehle/blog/feed.xml">
</head>

<!-- https://docs.mathjax.org/en/v2.7-latest/start.html -->
<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>




  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/hoehle/blog/">Theory meets practice...</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/hoehle/blog/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">How to Win a Game (or More) of Super Six</h1>
    <p class="post-meta"><time datetime="2023-03-13T00:00:00+01:00" itemprop="datePublished">Mar 13, 2023</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h2 id="abstract">Abstract:</h2>
<p>We use simulation to analyse the family dicing game “Super Six”. In
particular we show that the person starting the game has a very high
chance of winning the game. Furthermore, a robust strategy to play
during the game is to keep throwing the dice regardless of the number of
free pits. In a mixed strategy landscape with more than two players this
seems to do better than a strategy extrapolated from the analytically
derived optimal strategy for the two player case.</p>
<center>
<img
src="/hoehle/blog/figure/source/2023-03-13-super6/plot_favor_factor-1.png" />
</center>
<p><br>
<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"/></a>
This work is licensed under a <a rel="license"
href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons
Attribution-ShareAlike 4.0 International License</a>. The <a
href="https://raw.githubusercontent.com/hoehleatsu/hoehleatsu.github.io/master/_source/2023-03-13-super6.Rmd">R-markdown
source code</a> of this blog is available under a <a
href="https://www.gnu.org/licenses/gpl-3.0.html">GNU General Public
License (GPL v3)</a> license from GitHub.</p>
<h2 id="introduction">Introduction</h2>
<p><a
href="https://de-m-wikipedia-org.translate.goog/wiki/Super_Six_(Spiel)?_x_tr_sl=auto&amp;_x_tr_tl=en&amp;_x_tr_hl=de&amp;_x_tr_pto=wapp"><strong>Super
Six</strong></a> is a dice game which can be played at all ages. It
consists of a container where the lid has 5 pits (labelled 1-5) and one
hole (labelled 6). Furthermore, each player gets a predetermined number
of sticks and a dice (see Fig.1). If a stick is put into pit 6 (the
hole) it falls into container and stays there.</p>
<center>
<figure>
<img src="/hoehle/blog/figure/source/2023-03-13-super6/super6.jpg"
alt="Figure 1: A snapshot of a Super 6 game with 2 players, who both initially started with 4 sticks." />
<figcaption aria-hidden="true">Figure 1: A snapshot of a Super 6 game
with 2 players, who both initially started with 4 sticks.</figcaption>
</figure>
</center>
<p>The rules of the games are as follows: The sticks are distributed
among the players so that each player has exactly the same number of
sticks (say: 4). Each player throws the dice in turn going round in
clockwise direction. If a player throws a number and the corresponding
pit is empty, then he/she can insert one of his/her sticks into it. If
the pit is already occupied, however, then he/she must take the stick
and and add it to his/her own pile of sticks. The number 6 is a “lucky
throw”. With a 6, one can always place a stick into the hole labelled
No. 6 and it stays there. <strong>Note:</strong> <em>During the first
round, each player is only allowed to throw the dice once. From the
second round on, each player can throw the dice as often as desired,
provided that one always managed to hit an empty pit. As soon as one
throws the number of an occupied pit, one must take the stick that is
located there and it is then the next players turn. Each player most
throw the dice at least once per round, but after the first throw he/she
can decide to stop throwing at any time in that round (that is also
before hitting an occupied pit). Once a player has no sticks left, the
game is over and he/she is the winner.</em> This <a
href="https://www.youtube.com/watch?v=yrYybddqRQs">YouTube</a> video by
<a href="https://www.researchgate.net/profile/Ruediger-Jehn">Rüdiger
Jehn</a> shows a exemplary game play of Super Six.</p>
<p>Empirical experience from playing a lot of Super 6 with the kids
raises the question if the game is really fair: Does the player starting
the game have a winning advantage? Furthermore, interest is in the
optimal strategy to play: Should one always continue to throw the dice
until one hits an occupied pit or should one stop playing once there are
only <span class="math inline">\(x\)</span> out of the 5 pits free (with
<span class="math inline">\(x\)</span> being either 1 or 2)? In what
follows we shall use simulation to get an approximate answer to these
questions in a realistic environment with different players following
different strategies. For a two player situation analytic results exist
<span class="citation" data-cites="jehn2021">(Jehn 2021)</span>.</p>
<h2 id="simulating-super-6">Simulating Super 6</h2>
<p>The file <a
href="https://raw.githubusercontent.com/hoehleatsu/hoehleatsu.github.io/master/figure/source/2023-03-13-super6/super6.R"><code>super6.R</code></a>
contains a function <code>simulate_super6</code> with arguments
<code>players_strategy</code> and <code>sticks</code> to simulate a game
of Super 6 for <span
class="math inline">\(n\)</span>=<code>length(players_strategy)</code>
players each initially having <code>sticks</code> number of sticks. The
named list <code>players_strategy</code> contains each player’s strategy
as a <code>tibble</code>, mapping the number of free pits
(i.e. 0,1,2,3,4,5) to a probability to continue throwing the dice. If
this probability is either 0 or 1 then we have a deterministic strategy.
As an example the <code>always</code> strategy describes a behaviour
where one keeps throwing the dice independent of the number of free
pits:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(always <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">filled_holes=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>,   <span class="at">continue_prob=</span><span class="dv">1</span>))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   filled_holes continue_prob
##          &lt;int&gt;         &lt;dbl&gt;
## 1            0             1
## 2            1             1
## 3            2             1
## 4            3             1
## 5            4             1
## 6            5             1</code></pre>
<p>As an example: To simulate a single game of Super 6 with three
players, A, B and C, each playing the “always” strategy with initially 4
sticks we call</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="fu">simulate_super6</span>(<span class="fu">list</span>(<span class="at">A=</span>always, <span class="at">B=</span>always, <span class="at">C=</span>always), <span class="at">sticks=</span><span class="dv">4</span>)</span></code></pre></div>
<p>The resulting trajectory of state and actions of the game are
returned by the function:</p>
<p>
<table class="table table-striped" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="4">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Gameplay
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="6">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Pit Status
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Player Status
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Game Status
</div>
</th>
</tr>
<tr>
<th style="text-align:center;">
round
</th>
<th style="text-align:center;">
player
</th>
<th style="text-align:center;">
turn
</th>
<th style="text-align:center;">
dice
</th>
<th style="text-align:center;">
hole.1
</th>
<th style="text-align:center;">
hole.2
</th>
<th style="text-align:center;">
hole.3
</th>
<th style="text-align:center;">
hole.4
</th>
<th style="text-align:center;">
hole.5
</th>
<th style="text-align:center;">
hole.6
</th>
<th style="text-align:center;">
sticks.A
</th>
<th style="text-align:center;">
sticks.B
</th>
<th style="text-align:center;">
sticks.C
</th>
<th style="text-align:center;">
decision
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
C
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
stop turn
</td>
</tr>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
A
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
stop turn
</td>
</tr>
<tr>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
B
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
stop turn
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
C
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
lost turn
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
A
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
continue turn
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
A
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
lost turn
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
B
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
continue turn
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
B
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
continue turn
</td>
</tr>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
B
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
6
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
0
</td>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
game over
</td>
</tr>
</tbody>
</table>
<p>
<p>Note that in the above game the player to start is randomly selected.
The players then each take turns in the pre-determined order. The order
of the rows in the table corresponds to the sequence of actions in the
game. The column <code>turn</code> is a counter indicating how many
times the player has thrown the dice during his/her round. The columns
<code>hole.1</code>-<code>hole.5</code> are binary indicators whether
the respective pit is currently filled with a stick (FALSE=0, TRUE=1).
Finally, a column counts for each player the current number of remaining
sticks (initially equal to 4). The last column, <code>decision</code>
contains information about the player’s action and its consequences.
Here, “stop turn” is a forced decision in round 1, because each player
can only throw the dice once in round 1. Furthermore, “lost turn”
indicates the situation that the pit indicated by the dice throw was
already occupied and “continue turn” means that the player based on
his/her strategy decided to throw again. Finally, “game over” means that
one player reduced their number of sticks to zero and the game thus
ends. The winner of the shown game shown is B.</p>
<h2 id="analysis">Analysis</h2>
<p>We can use the above simulation function to analyse different
strategies for games with 4 initial sticks. Consider the four additional
strategies:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>go50 <span class="ot">&lt;-</span> <span class="fu">tibble</span>( <span class="at">filled_holes=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>,   <span class="at">continue_prob=</span><span class="dv">1</span><span class="sc">*</span>(filled_holes<span class="sc">&lt;=</span><span class="dv">3</span>))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>go67 <span class="ot">&lt;-</span> <span class="fu">tibble</span>( <span class="at">filled_holes=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>,   <span class="at">continue_prob=</span><span class="dv">1</span><span class="sc">*</span>(filled_holes<span class="sc">&lt;=</span><span class="dv">4</span>))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>random <span class="ot">&lt;-</span> <span class="fu">tibble</span>( <span class="at">filled_holes=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">continue_prob=</span><span class="fl">0.5</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>random2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">filled_holes=</span><span class="dv">0</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">continue_prob=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="fl">0.5</span>,<span class="fl">0.25</span>))</span></code></pre></div>
<p>Let’s assume that Agneta is playing the <code>always</code> strategy
and that Bertil, Cecilia, Dagmar and Emil each are playing one of the
four other strategies.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>player_list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Agneta=</span> always,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Birger=</span> go50,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Carin=</span>  go67,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Dagmar=</span> random,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Emil=</span>   random2)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>player_names <span class="ot">&lt;-</span> <span class="fu">names</span>(player_list)</span></code></pre></div>
<p>We now consider all possible matches of these players. This can be
games ranging from just 2 of the players to all 5 of them.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>n_players <span class="ot">&lt;-</span> 2L<span class="sc">:</span><span class="fu">length</span>(player_names)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>matches <span class="ot">&lt;-</span> <span class="fu">map</span>(n_players, <span class="cf">function</span>(m) {</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  utils<span class="sc">::</span><span class="fu">combn</span>(player_names, <span class="at">m=</span>m, <span class="at">simplify=</span><span class="cn">FALSE</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>}) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(n_players)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>n_combos <span class="ot">&lt;-</span> <span class="fu">map</span>(matches, length)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>n_combos <span class="sc">%&gt;%</span> <span class="fu">unlist</span>()</span></code></pre></div>
<pre><code>##  2  3  4  5 
## 10 10  5  1</code></pre>
<p>To ensure that the we consider an equal amount of games for every
number of players, we simulate <code>n_games</code> games for each
number of players (2-5). The games to play are then distributed equal
among the different pairings with that number of players. For this
reason, <code>n_games</code> has to be divisible by 5 and 10.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>n_games <span class="ot">&lt;-</span> <span class="dv">10000</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Parallelize analysis using the future-verse</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plan</span>(multisession, <span class="at">workers =</span> <span class="dv">4</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Play the games</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>all_games <span class="ot">&lt;-</span> <span class="fu">future_map2</span>(matches, n_combos,  <span class="cf">function</span>(names, combos) {</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(names, <span class="sc">~</span> {</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    the_players_strategy <span class="ot">&lt;-</span> player_list[.x]</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Divide the n_games equal among the possible combinations</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    n_games_each_combo <span class="ot">&lt;-</span> n_games <span class="sc">/</span> combos</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">map</span>(<span class="fu">seq_len</span>(n_games_each_combo), <span class="sc">~</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>          <span class="fu">simulate_super6</span>(<span class="at">players_strategy=</span>the_players_strategy, <span class="at">sticks=</span><span class="dv">4</span>)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  }) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">map</span>(names, <span class="sc">~</span> <span class="fu">str_c</span>(.x, <span class="at">collapse=</span><span class="st">&quot;-&quot;</span>)))</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>}, <span class="at">.options=</span><span class="fu">furrr_options</span>(<span class="at">seed=</span><span class="cn">TRUE</span>))</span></code></pre></div>
<p>This provides a nested list structure, where the top-most level
contains the number of players of the game, the 2nd level contains the
name of the participating players and the 3rd level the recordings of
every game played of the respective player combination (organised as a
tibble). The recordings/history of each game is organised as a data
frame with columns closely related to the above game description. As an
example, a total of</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>all_games[[<span class="st">&quot;3&quot;</span>]][[<span class="st">&quot;Agneta-Birger-Carin&quot;</span>]] <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span></code></pre></div>
<pre><code>## [1] 1000</code></pre>
<p>games (=10000/10) are played between the players Agneta, Birger and
Carin.</p>
<p>We now use this nested list structure of simulated games to answer
our questions of interest. The traversing of the list is done by purrr.
As an example we determine the total number of games as follows:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(n_total_games <span class="ot">&lt;-</span> <span class="fu">map</span>(all_games, <span class="sc">~</span> <span class="fu">map</span>(.x, length)) <span class="sc">%&gt;%</span> <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="fu">sum</span>())</span></code></pre></div>
<pre><code>## [1] 40000</code></pre>
<h3 id="beginner-is-winner">Beginner is Winner?</h3>
<p>We now investigate the probability to win the starting player. Let
<code>h</code> denote the tibble describing the history of a game (such
as shown above). We will write a function, which given the history of a
game returns the player name who won the game.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>winner <span class="ot">&lt;-</span> <span class="cf">function</span>(h) {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  h <span class="sc">%&gt;%</span> <span class="fu">slice_tail</span>(<span class="at">n=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(player)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Test the function on the above shown trajectory</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="fu">winner</span>(h)</span></code></pre></div>
<pre><code>## [1] &quot;B&quot;</code></pre>
<p>We can use the function to determine the probability that the player
starting the game also becomes the winner of the game. To take into
account a possible dependence on the number of players we shall stratify
our analysis by the number of players in the game.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>games_summary <span class="ot">&lt;-</span> <span class="fu">map2_df</span>(all_games, n_players, <span class="cf">function</span>(games, players) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(games, <span class="sc">~</span><span class="fu">map_df</span>(.x, <span class="sc">~</span> <span class="fu">tibble</span>(<span class="at">n_players=</span><span class="fu">as.numeric</span>(players), </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">beginner=</span>.x <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(player),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">winner=</span>.x <span class="sc">%&gt;%</span> <span class="fu">slice_tail</span>(<span class="at">n=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(player))))</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> games_summary <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(n_players) <span class="sc">%&gt;%</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">p_initial_winner=</span><span class="fu">mean</span>(beginner<span class="sc">==</span>winner)) <span class="sc">%&gt;%</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">p_random =</span> <span class="dv">1</span><span class="sc">/</span>n_players,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">favor_factor =</span> p_initial_winner <span class="sc">/</span> p_random) </span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:center;">
n_players
</th>
<th style="text-align:center;">
p_initial_winner
</th>
<th style="text-align:center;">
p_random
</th>
<th style="text-align:center;">
favor_factor
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
0.6009
</td>
<td style="text-align:center;">
0.5000000
</td>
<td style="text-align:center;">
1.2018
</td>
</tr>
<tr>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
0.4438
</td>
<td style="text-align:center;">
0.3333333
</td>
<td style="text-align:center;">
1.3314
</td>
</tr>
<tr>
<td style="text-align:center;">
4
</td>
<td style="text-align:center;">
0.3527
</td>
<td style="text-align:center;">
0.2500000
</td>
<td style="text-align:center;">
1.4108
</td>
</tr>
<tr>
<td style="text-align:center;">
5
</td>
<td style="text-align:center;">
0.2970
</td>
<td style="text-align:center;">
0.2000000
</td>
<td style="text-align:center;">
1.4850
</td>
</tr>
</tbody>
</table>
<p><img src="/hoehle/blog/figure/source/2023-03-13-super6/plot_favor_factor-1.png" style="display: block; margin: auto;" /></p>
<p>The empirical probability that the initial player wins is always
higher than the probability <span class="math inline">\(1/n\)</span>
that one of the <span class="math inline">\(n\)</span> players in the
game wins at random. The larger the number of players the bigger the
relative advantage of beginning seems. Note that our analysis averages
over the all strategies so it also contains start players using an
otherwise sub-optimal playing strategy. This might bias the analysis
slightly, but a small sensitivity analysis letting all 5 players play
the <code>always</code> strategy, showed that results did not change
substantially.</p>
<h3 id="best-strategy">Best strategy</h3>
<p>We can now compute for each player (i.e. strategy) the number of wins
out of the 40000 games:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(league_table <span class="ot">&lt;-</span> <span class="fu">map</span>(all_games, <span class="sc">~</span> <span class="fu">map</span>(.x, <span class="sc">~</span> <span class="fu">map</span>(.x, winner))) <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">player =</span> value) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(player) <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wins=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(wins)))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   player  wins
##   &lt;chr&gt;  &lt;int&gt;
## 1 Birger  8800
## 2 Carin   8593
## 3 Emil    8520
## 4 Agneta  8419
## 5 Dagmar  5668</code></pre>
<p>This shows that the <code>always</code> strategy appears to do best
among those strategies investigated. It is no surprise that the worst
strategy is the purely random strategy <code>random</code>.</p>
<h2 id="discussion">Discussion</h2>
<p>We analysed aspects of how to win a game (or more) of Super Six.
Important factors for winning in a multi-player mixed strategy landscape
are</p>
<ol type="1">
<li>To start the game</li>
<li>To keep throwing the dice</li>
</ol>
<p>A little surprising is that the best strategy (among those
investigated) is to keep throwing the dice regardless of the number of
free pits. The optimal strategy may in part depend on how the other
players play, but our conclusions appear sufficiently robust, because
the simulation study investigated a mixed strategy player field with two
to five players. A limitation of our analysis is that we only considered
games where each player initially holds 4 sticks.</p>
<p>It is worth pointing out that the best strategy we found is not
optimal. As an example, <span class="citation"
data-cites="jehn2021">Jehn (2021)</span> analytically finds the optimal
strategy for the <span class="math inline">\(n=2\)</span> player
situation. It depends on the number of sticks left in the game and the
number of sticks each player has. In most cases the strategy stops if
more than 3 pits are occupied – see Appendix 1 for details. This
dependence on the other player’s hand is likely to carry forward to
<span class="math inline">\(n&gt;2\)</span> player situation. Analytic
results for <span class="math inline">\(n&gt;2\)</span> situations will
be extremely difficult to obtain, but it makes intuitive sense to be
more aggressive when there are more players, because there are more
contestants for the win.</p>
<p>Did the game developers realized that the start player has such a
high probability of winning the game? It seems advisable to accompany
game development by simulations and mathematical calculations at the
design stage. In practice one should randomize the start player to
enhance fairness.</p>
<p><strong>Final note</strong>: This will be the last post of <em>Theory
Meets Practice</em> Blog in its current form. As of Jan 2023 I am
working as full professor in Statistics and Data Science at the <a
href="https://math-inf.uni-greifswald.de/en/michael-hoehle/">University
of Greifswald</a>, Germany. For both technical and time reasons a new
setup is thus needed.</p>
<h2 id="appendix-1">Appendix 1</h2>
<p>The work of <span class="citation" data-cites="jehn2021">Jehn
(2021)</span> shows the derivation of the optimal strategies encoded in
<a href="https://oeis.org/A345383">A345383</a> for a game with 2 players
and a situation where <span class="math inline">\(i\)</span> pits
occupied, the first player (our player of interest) has <span
class="math inline">\(j\)</span> sticks in hand and the second player
has <span class="math inline">\(k\)</span> sticks. This state is denoted
as <span class="math inline">\(i/j/k\)</span>. For example <span
class="math inline">\(2/1/1\)</span> denotes the situation where there
are 2 pits occupied in the lid and each player has one stick.</p>
<p>A small helper function gives all states where a continue vs. stop
choice needs to be made. It is assumed that if there are no sticks in
the lid, we always continue:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Find all situations where a continue vs. stop choice is to be made</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; for player 1.</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; See Jehn (2021), https://arxiv.org/pdf/2109.10700.pdf, for details.</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param n Total number of sticks currently (i+j+k)</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return A vector of strings describing the situations in i/j/k notation</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; where i is the number of occupied pits in the lid, j is the number of</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; sticks player 1 has and k is the number of sticks player 2 has. Note</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; i+j+k = n</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>situations <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  res <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sticks in the Lid</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">min</span>(n,<span class="dv">5</span>)<span class="sc">:</span><span class="dv">1</span>) {</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sticks Player 1</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> n<span class="sc">:</span><span class="dv">1</span>) {</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Sticks Player 2</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>      k <span class="ot">&lt;-</span> n <span class="sc">-</span> i <span class="sc">-</span> j</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Don&#39;t consider impossible situations or situations without a choice</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (k<span class="sc">&gt;</span><span class="dv">0</span>  <span class="sc">&amp;</span> <span class="sc">!</span>(i<span class="sc">==</span><span class="dv">0</span> <span class="sc">&amp;</span> j<span class="sc">==</span>k)) {</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>        res <span class="ot">&lt;-</span> <span class="fu">append</span>(res, <span class="fu">str_c</span>(<span class="fu">c</span>(i,j,k), <span class="at">collapse=</span><span class="st">&quot;/&quot;</span>))</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="co"># All situations when there are 7 sticks left in the game</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a><span class="fu">situations</span>(<span class="at">n=</span><span class="dv">7</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;5/1/1&quot; &quot;4/2/1&quot; &quot;4/1/2&quot; &quot;3/3/1&quot; &quot;3/2/2&quot; &quot;3/1/3&quot; &quot;2/4/1&quot; &quot;2/3/2&quot; &quot;2/2/3&quot; &quot;2/1/4&quot; &quot;1/5/1&quot; &quot;1/4/2&quot; &quot;1/3/3&quot; &quot;1/2/4&quot; &quot;1/1/5&quot;</code></pre>
<p>The optimal strategy is encoded in binary and converted to base 10 in
the sequence <a href="https://oeis.org/A345383">A345383</a>. We write a
small R extractor to display the optimal strategy in more readable
form:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Handle the large integers using the GMP library</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(gmp))</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Encodes [A345383](https://oeis.org/A345383)</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param n Number of sticks</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @returns a(n) from A345383</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  a <span class="ot">&lt;-</span> <span class="fu">as.bigz</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">63</span>, <span class="dv">1023</span>, <span class="dv">32760</span>, <span class="dv">1048544</span>, <span class="dv">33554304</span>, <span class="dv">1073741312</span>, <span class="dv">34359736320</span>, <span class="dv">1099511619584</span>, <span class="dv">35184370221056</span>, <span class="dv">1125899873681408</span>, <span class="dv">36028796752101376</span>))</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (n<span class="sc">&gt;=</span><span class="dv">1</span> <span class="sc">&amp;</span> n<span class="sc">&lt;=</span><span class="dv">15</span>) <span class="fu">return</span>(a[n]) <span class="cf">else</span> <span class="fu">return</span>(<span class="cn">NA</span>)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Convert a strategy encoded as a 0/1 string to a vector of Booleans</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param s The strategy as a string of 0 and 1&#39;s</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return As a vector</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; int_strategy_to_vec(&quot;0011&quot;)</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>int_strategy_to_vec <span class="ot">&lt;-</span> <span class="cf">function</span>(s) {</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split_1</span>(<span class="fu">as.character</span>(s, <span class="at">b=</span><span class="dv">2</span>), <span class="at">pattern=</span><span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">as.integer</span>()</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Show the optimal stragegy for all situations with n sticks</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>optimal_strategy <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Make a tibble representing the optimal strategy</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">situation=</span> <span class="fu">situations</span>(n),</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">continue =</span> <span class="fu">rev</span>(<span class="fu">int_strategy_to_vec</span>(<span class="fu">a</span>(n))))</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a><span class="fu">optimal_strategy</span>(<span class="at">n=</span><span class="dv">7</span>) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n=</span><span class="cn">Inf</span>)</span></code></pre></div>
<pre><code>## # A tibble: 15 × 2
##    situation continue
##    &lt;chr&gt;        &lt;int&gt;
##  1 5/1/1            0
##  2 4/2/1            0
##  3 4/1/2            0
##  4 3/3/1            1
##  5 3/2/2            1
##  6 3/1/3            1
##  7 2/4/1            1
##  8 2/3/2            1
##  9 2/2/3            1
## 10 2/1/4            1
## 11 1/5/1            1
## 12 1/4/2            1
## 13 1/3/3            1
## 14 1/2/4            1
## 15 1/1/5            1</code></pre>
<p>We observe that for situations with 7 sticks we continue to play as
long as only 1-3 pits are filled. If 4 or 5 pits are filled, we don’t
continue. However, in other settings with different number of sticks
left, the optimal strategy can be different. As an example, if there 6
sticks left, the optimal strategy is</p>
<pre><code>## # A tibble: 10 × 2
##    situation continue
##    &lt;chr&gt;        &lt;int&gt;
##  1 4/1/1            1
##  2 3/2/1            1
##  3 3/1/2            1
##  4 2/3/1            1
##  5 2/2/2            1
##  6 2/1/3            1
##  7 1/4/1            1
##  8 1/3/2            1
##  9 1/2/3            1
## 10 1/1/4            1</code></pre>
<p>which -opposite to the 7 sticks left situation- continues in the 4
pits filled situation, if each player has only one stick left
(4/1/1).</p>
<p>Finally, we implement a function, which implements Jehn’s optimal
strategy in a way, which can be used by the simulation function
<code>simulate_super6()</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; Jehn&#39;s optimal strategy for for two players</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param player_idx Index of the player in the state_players variable (see simulate_super6 function)</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param filled_holes Number of pits filled</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @param state_players Vector of length equal to the number of players containing the number of sticks each player has left</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; @return A numeric corresponding to the probability to continue</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; </span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>jehn <span class="ot">&lt;-</span> <span class="cf">function</span>(player_idx, filled_holes, state_players) {</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Some summaries</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  sticks_left <span class="ot">&lt;-</span> filled_holes <span class="sc">+</span> <span class="fu">sum</span>(state_players)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  my_sticks <span class="ot">&lt;-</span> state_players[player_idx]</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  other_sticks <span class="ot">&lt;-</span> state_players[<span class="sc">-</span>player_idx]</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Strategy for basic cases</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (filled_holes <span class="sc">&lt;=</span> <span class="dv">2</span>) <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (filled_holes <span class="sc">==</span> <span class="dv">5</span>) <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Complicated part of the strategy</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  s_best <span class="ot">&lt;-</span> <span class="fu">optimal_strategy</span>(<span class="at">n=</span>sticks_left)</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  state <span class="ot">&lt;-</span> <span class="fu">str_c</span>(filled_holes, my_sticks, other_sticks, <span class="at">sep=</span><span class="st">&quot;/&quot;</span>)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  action <span class="ot">&lt;-</span> s_best <span class="sc">%&gt;%</span> <span class="fu">filter</span>(situation <span class="sc">==</span> state) <span class="sc">%&gt;%</span> </span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pull</span>(continue)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if output fails (this should not happen).  </span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(action) <span class="sc">==</span> <span class="dv">0</span>) { <span class="fu">browser</span>()}</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.numeric</span>(action)) { <span class="fu">browser</span>()}</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Done</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(action)</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
<p>This allows us to test, if there is a winning advantage, despite both
players playing the optimal strategy (see <a
href="https://raw.githubusercontent.com/hoehleatsu/hoehleatsu.github.io/master/_source/2023-03-13-super6.Rmd">source
code</a> for details).</p>
<pre><code>## # A tibble: 1 × 1
##   p_win_beginner
##            &lt;dbl&gt;
## 1          0.596</code></pre>
<p>The answer is thus: Yes! In 60% of the games the starting player
wins. Thus, the winning advantage of the beginner in the <span
class="math inline">\(n=2\)</span> scenario remains even when both
players use the <code>jehn</code> optimal winning strategy.</p>
<h2 class="unnumbered" id="literature">Literature</h2>
<div id="refs" class="references csl-bib-body hanging-indent"
role="list">
<div id="ref-jehn2021" class="csl-entry" role="listitem">
Jehn, Rüdiger. 2021. <span>“Optimum Strategies for the Game Super
Six.”</span> arXiv. <a
href="https://doi.org/10.48550/ARXIV.2109.10700">https://doi.org/10.48550/ARXIV.2109.10700</a>.
</div>
</div>

  </div>

</article>

	

<!-- Add Disqus comments. -->
<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     **/
    /**
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    **/
    var disqus_config = function () {
      this.page.url = "http://staff.math.su.se/hoehle/blog/2023/03/13/super6.html";
      this.page.identifier = "/2023/03/13/super6";
    };
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//hoehle.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">Theory meets practice...</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Theory meets practice...</li>
          <li><a href="http://www.math.su.se/~hoehle">Michael Höhle</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/mhoehle"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">mhoehle</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/m_hoehle"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">m_hoehle</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>A blog about statistics in theory and practice. Not always serious, not always flawless, but definitely a statistically flavoured bean.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
